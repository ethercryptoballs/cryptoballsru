window.addEventListener("load",async()=>{if(window.ethereum){window.web3=new Web3(ethereum);try{await ethereum.enable(),run()}catch(t){console.log("Error",t),$("#loader .circle").remove(),$("#loader h1").html("<b>Обновите страницу и разрешите доступ</b> для чтения данных из блокчейна во всплывающем окне Metamask."),$("#loader h1").append('<br><br><img src="./img/allow.png" srcset="./img/allow@2x.png 2x" class="img-example">'),$("#loader").css("margin-top","0"),$("#loader").css("margin-left","calc(50vw - 200px)"),$("#loader").css("width","400px")}}else window.web3?(window.web3=new Web3(web3.currentProvider),run()):(!function(t,e,n){var a,i=t.getElementsByTagName(e)[0];t.getElementById(n)||((a=t.createElement(e)).id=n,a.onload=function(){window.web3=new Web3(new Web3.providers.HttpProvider("https://rinkeby.infura.io/de2f9663960846888ede04dd1bf9c015")),run()},a.src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js",i.parentNode.insertBefore(a,i))}(document,"script","default-web3"),$("body>header").prepend('\n        <div class="header-top header-top-2">\n\t\t\t<div class="header-top-block-content">\n\t\t\t\t<img src="./img/icon/top-content-metamask.png" alt="">\n\t\t\t\t<p>Внимание! Нет Metamask. <a href="regulation.html">Установите плагин</a></p>\n\t\t\t</div>\n\t\t</div>'),$(".action").off("click").css("opacity","0.5").removeAttr("href").find("a").removeAttr("href"),console.log("Non-Ethereum browser detected. You should consider trying MetaMask!"))});var Contract645={},Draw645={},ActiveDraw={},LastDraw={},Network=0;function run(){var t,e,n;setInterval(()=>{web3.version.getNetwork(async(a,i)=>{if(i!==t){switch(i){case"1":console.log("This is mainnet"),Network=1;break;case"4":console.log("This is the rinkeby test network."),e="0x4e2eb9007d4f1b5d9298626637328173abdb42be",n="0xd3a51c008d620757633f0fa1e848d3a332e02500",Network=4;break;case"15":console.log("This is the local test network."),e="0xe65dd0ffa951d4f39633ae4ad89b953c9ddc1b2d",n="0xe65dd0ffa951d4f39633ae4ad89b953c9ddc1b2d",Network=15;break;default:console.log("This is an unknown network."),e="0xb72f3afb999f8ce983aa78864779a7f2c732ec4c",n="0xb72f3afb999f8ce983aa78864779a7f2c732ec4c"}t=i,Contract645=new Contract(e,n),initScope(window),await Contract645.Init()}})},100)}async function runOneSignal(){var t=setInterval(async()=>{Contract645.hasOwnProperty("contractAddress")&&(clearInterval(t),Contract645.watch("myTickets",function(t,e,n){!async function(t){let e=await OneSignal.getTags();var n={},a=0;for(i of t){var i=i.toNumber(),s="ticket_"+i;if(null!==e&&!e.hasOwnProperty(s)&&(n[s]=!0,100==++a)){var c=await OneSignal.sendTags(n);console.log("Tags was updated",c),n={},a=0}}a>0&&(c=await OneSignal.sendTags(n),console.log("Tags was updated",c))}(n)}))},1)}async function registerTicket(t,e){t.value="Processing...",t.disabled=!0;var n=prompt("Enter 6 numbers. Follow example","[1,2,3,4,5,6]");try{var a=JSON.parse(n);if(6!=a.length)throw"Numbers count should be 6";await Contract645.registerTicket(e,a,Contract645.drawNumber)}catch(e){return alert("Error",e.toString()),t.value="Register",void(t.disabled=!1)}t.parentNode.removeChild(t),Contract645.Init()}function countdown(t,e){var n=new Date(t).getTime(),a=setInterval(function(){var t=(new Date).getTime(),i=n-t,s=Math.floor(i/864e5),c=Math.floor(i%864e5/36e5),r=Math.floor(i%36e5/6e4),o=Math.floor(i%6e4/1e3);e.innerHTML=s+"d "+c+":"+r+":"+o,i<0&&(clearInterval(a),e.innerHTML="00:00:00")},1e3)}function initScope(){var t=document.querySelectorAll("[data-tw-bind]");t.forEach(function(e){var n,a,i,s,c=e.getAttribute("data-tw-scope"),r=e.getAttribute("data-tw-bind");n=c,a=r,i=async function(e,a,i){if(null!==i&&void 0!==i)return i instanceof Promise&&(i=await i),t.forEach(async function(t){if(t.getAttribute("data-tw-scope")===n&&t.getAttribute("data-tw-bind")===e){var a=t.getAttribute("data-tw-filter");null!==a&&(i=await s(a,i,t)),!t.type||"text"!==t.type&&"textarea"!==t.type?t.type||(t.innerHTML=i):t.value=i}}),i},s=async function(t,e,n){if(null===e)return e;switch(t){case"date":let a=new Date(1e3*e);e=a.toLocaleDateString()+" "+a.toLocaleTimeString().substring(0,5);break;case"ether":e=web3.fromWei(e,"ether").toFixed(5);break;case"length":e=e.length;break;case"referrer":e="0"==e?" <input type='button' onclick='Contract645.registerReferrer(this)' value='Get referrer ID'>":"<a href='"+document.location.origin+document.location.pathname+"?r="+e+"'>#"+e+"</a>";break;case"main_numbers":{let t=unpack(e,6),n="";for(let e=0;e<t.length;e++)n+=`<div class="main-result-number">${t[e]}</div>`;e=n}break;case"countdown":countdown(1e3*e,n);break;case"contract":switch(Network){case 1:e=`<a href="https://etherscan.io/address/${e}" target="_blank">${e}</a>`;break;case 4:e=`<a href="https://rinkeby.etherscan.io/address/${e}" target="_blank">${e}</a>`}break;case"ipfs":e=`<a href="https://ipfs.io/ipfs/${e}" target="_blank">${e}</a>`}return e},window[n].watch(a,i),window[n].hasOwnProperty(a)&&i(a,!1,window[n][a]),"text"!==e.type&&"textarea"!==e.type||(e.onkeyup=function(){window[c][r]=e.value})})}function unpack(t,e){let n=[],a=t.toString(2).split("").reverse();for(let t=0;t<a.length;t++)"1"===a[t]&&n.push(t);return n}function getQueryVariable(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var a=e[n].split("=");if(decodeURIComponent(a[0])===t)return decodeURIComponent(a[1])}}Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,e){this.hasOwnProperty("handlers")||(this.handlers={}),this.handlers.hasOwnProperty(t)||(this.handlers[t]=[]);var n=this;this.handlers[t].push(e);var a=this[t];delete this[t]&&Object.defineProperty(this,t,{get:function(){return a},set:function(i){if(a===i)return!1;if(n.handlers.hasOwnProperty(t))for(e of n.handlers[t])e.call(this,t,a,i);a=i},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(t){var e=this[t];delete this[t],this[t]=e}});const copyToClipboard=t=>{const e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select();const n=document.execCommand("copy");return document.body.removeChild(e),n};!function(t){var e={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper"},n=t(window),a=t(document),i=[],s=n.height(),c=function(){for(var t=n.scrollTop(),e=a.height(),c=e-s,r=t>c?c-t:0,o=0;o<i.length;o++){var u=i[o];if(t<=u.stickyWrapper.offset().top-u.topSpacing-r)null!==u.currentTop&&(u.stickyElement.css("position","").css("top","").removeClass(u.className),u.stickyElement.parent().removeClass(u.className),u.currentTop=null);else{var d=e-u.stickyElement.outerHeight()-u.topSpacing-u.bottomSpacing-t-r;d<0?d+=u.topSpacing:d=u.topSpacing,u.currentTop!=d&&(u.stickyElement.css("position","fixed").css("top",d).addClass(u.className),u.stickyElement.parent().addClass(u.className),u.currentTop=d)}}},r=function(){s=n.height()},o={init:function(n){var a=t.extend(e,n);return this.each(function(){var e=t(this);stickyId=e.attr("id"),wrapper=t("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(a.wrapperClassName),e.wrapAll(wrapper);var n=e.parent();n.css("height",e.outerHeight()),i.push({topSpacing:a.topSpacing,bottomSpacing:a.bottomSpacing,stickyElement:e,currentTop:null,stickyWrapper:n,className:a.className})})},update:c};window.addEventListener?(window.addEventListener("scroll",c,!1),window.addEventListener("resize",r,!1)):window.attachEvent&&(window.attachEvent("onscroll",c),window.attachEvent("onresize",r)),t.fn.sticky=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sticky"):o.init.apply(this,arguments)},t(function(){setTimeout(c,0)})}(jQuery),function(t){var e;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var n=window.Cookies,a=window.Cookies=t();a.noConflict=function(){return window.Cookies=n,a}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(a){function i(){}function s(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=t({path:"/"},i.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var c=JSON.stringify(n);/^[\{\[]/.test(c)&&(n=c)}catch(t){}n=a.write?a.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var o in s)s[o]&&(r+="; "+o,!0!==s[o]&&(r+="="+s[o].split(";")[0]));return document.cookie=e+"="+n+r}}function c(t,n){if("undefined"!=typeof document){for(var i={},s=document.cookie?document.cookie.split("; "):[],c=0;c<s.length;c++){var r=s[c].split("="),o=r.slice(1).join("=");n||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var u=e(r[0]);if(o=(a.read||a)(o,u)||e(o),n)try{o=JSON.parse(o)}catch(t){}if(i[u]=o,t===u)break}catch(t){}}return t?i[t]:i}}return i.set=s,i.get=function(t){return c(t,!1)},i.getJSON=function(t){return c(t,!0)},i.remove=function(e,n){s(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})});const CryptoBall645ABI=[{constant:!0,inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_BALLS_COUNT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ticketPrice",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"drawContractAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"setReferrerBonusSale",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_referrer",type:"uint256"}],name:"getReferrerTickets",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ticketToReferrer",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"referrerBonusWin",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"registerReferrer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"setReferrerBonusWin",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"referrerTickets",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"tokenIds",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ownerBonusWin",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"mintDate",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"totalEarnReferrer",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"_referrerId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"referrerToAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"addressToReferrer",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_BALL_NUMBER",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"referrerBonusSale",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ownerBonusSale",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_amount",type:"uint256"}],name:"OwnerBonus",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_amount",type:"uint256"}],name:"ReferrerBonus",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"approved",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"setTicketPrice",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"setOwnerBonusSale",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"setOwnerBonusWin",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_address",type:"address"}],name:"setDrawContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getMyTickets",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_referrerId",type:"uint256"}],name:"buyTicket",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_referrerId",type:"uint256"},{name:"_numbers",type:"uint256[]"},{name:"_drawCount",type:"uint256"}],name:"buyAndRegisterTicket",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_numbers",type:"uint256[]"},{name:"_drawNumber",type:"uint256"}],name:"registerTicket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"}],name:"checkTicket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"}],name:"withdrawTicketPrize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getMyBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdrawMyBalance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"withdrawBalanceAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_address",type:"address"},{name:"_amount",type:"uint256"}],name:"addBalance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],Draw645ABI=[{constant:!0,inputs:[],name:"MAX_BALLS_COUNT",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"superPrize",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"drawRegistrationOpen",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"winnersCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"drawPrizes",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"drawProcessInterval",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"drawTickets",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"maxTicketsCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"winnerAmounts",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"prizesDistribution",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"drawTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"cronAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ticketPrizes",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"drawProof",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"closeRegistrationBefore",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"minTicketsCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"checkedTickets",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"drawProcessed",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"drawPrizeFund",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"cryptoBallContractAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"drawNumbers",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ticketNumbers",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MAX_BALL_NUMBER",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ipfsHash",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"ticketToDraw",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"drawNumber",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"nextDrawDateTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_cryptoBallContract",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"description",type:"string"}],name:"newOraclizeQuery",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_drawNumber",type:"uint256"}],name:"SuperPrize",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_drawingNumber",type:"uint256"}],name:"RegistrationClosed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_drawingNumber",type:"uint256"}],name:"RegistrationOpened",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{constant:!0,inputs:[],name:"getBasicData",outputs:[{name:"",type:"uint256"},{name:"",type:"bool"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_drawNumber",type:"uint256"}],name:"getDrawData",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256[]"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256[]"},{name:"",type:"uint256[]"},{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getTicketData",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256[]"},{name:"",type:"bool"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_address",type:"address"}],name:"setCryptoBallContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_address",type:"address"}],name:"setCronAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_nextDate",type:"uint256"}],name:"setNextDrawDateTime",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_seconds",type:"uint256"}],name:"setCloseRegistrationBefore",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_percents",type:"uint256[]"}],name:"setPrizesDistribution",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_ticketsCount",type:"uint256"}],name:"setMinTicketsCount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_ticketsCount",type:"uint256"}],name:"setMaxTicketsCount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"closeRegistration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"gasPrice",type:"uint256"},{name:"gasLimit",type:"uint256"}],name:"process",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"myid",type:"bytes32"},{name:"result",type:"string"}],name:"__callback",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"myid",type:"bytes32"},{name:"result",type:"string"},{name:"proof",type:"bytes"}],name:"__callback",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"finalizeProcess",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"},{name:"_numbers",type:"uint256[]"},{name:"_ticketPrice",type:"uint256"},{name:"_ownerBonusSale",type:"uint256"},{name:"_referrerBonusSale",type:"uint256"},{name:"_drawNumber",type:"uint256"}],name:"registerTicket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getTicketPrize",outputs:[{name:"guessNumbersCount",type:"uint256"},{name:"prize",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenId",type:"uint256"}],name:"checkTicket",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenId",type:"uint256"}],name:"getTicketNumbers",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_draw",type:"uint256"}],name:"getDrawNumbers",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_draw",type:"uint256"}],name:"getDrawTickets",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_draw",type:"uint256"}],name:"getWinnerAmounts",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_draw",type:"uint256"}],name:"getWinnersCount",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_drawIds",type:"uint256[]"}],name:"getDrawsNumber",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_ticketIds",type:"uint256[]"}],name:"getTicketsNumber",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_ticketIds",type:"uint256[]"}],name:"getTicketsDraw",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"addSuperPrize",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_hash",type:"string"}],name:"setIpfsHash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];function sleep(t){return new Promise(e=>setTimeout(e,t))}async function getTransactionReceipt(t){var e;do{e=await new Promise((e,n)=>web3.eth.getTransactionReceipt(t,(t,a)=>{t?(console.log("Get transaction receipt error:",t),n(t)):e(a)}))}while(null===e);return e}Contract=function(t,e){this.handlers={},this.lastDrawData={},this.ready=!1;const n=web3.eth.contract(CryptoBall645ABI);this.contractAddress=t,this.CryptoBallInstance=n.at(t);const a=web3.eth.contract(Draw645ABI);this.drawAddress=e,this.DrawInstance=a.at(e),DrawInstance=this.DrawInstance,this.Init=async function(){let t=0;this._checkUserAccount();var e=await this.getBasicData();this.drawNumber=e.drawNumber,this.lastDrawNumber=e.lastDrawNumber,this.drawRegistrationOpen=e.drawRegistrationOpen,this.nextDrawDateTime=e.nextDrawDateTime,this.closeRegistrationBefore=e.closeRegistrationBefore,this.superPrize=e.superPrize,this.prizesDistribution=e.prizesDistribution,this.getTicketPrice().then(e=>{this.ticketPrice=e,t++}),this.getMyBalance().then(e=>{this.myBalance=e,t++}),this.getData("ownerBonusSale").then(e=>{this.ownerBonusSale=e,t++}),this.getData("ownerBonusWin").then(e=>{this.ownerBonusWin=e,t++}),this.getData("referrerBonusSale").then(e=>{this.referrerBonusSale=e,t++}),this.getData("referrerBonusWin").then(e=>{this.referrerBonusWin=e,t++}),this.getDrawProcessInterval().then(e=>{this.drawProcessInterval=e,t++}),this.getIpfsHash().then(t=>{this.ipfsHash=t}),this.getDrawData(this.drawNumber).then(e=>{ActiveDraw.prizeFund=e.prizeFund,ActiveDraw.drawTickets=e.drawTickets,ActiveDraw.drawNumbers=e.drawNumbers,ActiveDraw.drawTime=e.drawTime,ActiveDraw.drawPrizes=e.drawPrizes,ActiveDraw.winnersCount=e.winnersCount,ActiveDraw.winnerAmounts=e.winnerAmounts,t++}),this.lastDrawNumber>0&&this.getDrawData(this.lastDrawNumber).then(t=>{LastDraw.prizeFund=t.prizeFund,LastDraw.drawTickets=t.drawTickets,LastDraw.drawNumbers=t.drawNumbers,LastDraw.drawTime=t.drawTime,LastDraw.drawPrizes=t.drawPrizes,LastDraw.winnersCount=t.winnersCount,LastDraw.winnerAmounts=t.winnerAmounts});try{this.getMyTickets().then(e=>{this.myTicketsCount=e.length,this.myTickets=e.reverse(),t++})}catch(e){this.myTickets=[],this.myTicketsCount=0,t++}try{this.getMyReferrerId().then(t=>{this.myReferrerId=t.toNumber(),this.myReferrerId>0&&(this.getTotalEarnReferrer(this.myReferrerId).then(t=>{this.myReferrerEarn=t}),this.getReferrerTicketsCount(this.myReferrerId).then(t=>{this.myReferrerTickets=t}))})}catch(t){console.log(t),this.myReferrerId=0,this.myReferrerEarn=0,this.myReferrerTickets=0}let n=setInterval(()=>{t>=9&&(this.ready=!0,clearInterval(n))},50)},this.getCryptoBallInstance=function(){return this.CryptoBallInstance},this.getDrawInstance=function(){return this.DrawInstance},this._checkUserAccount=function(){try{this.userAccount=web3.eth.coinbase}catch(t){return}setInterval(function(){web3.eth.coinbase!==this.userAccount&&(this.userAccount=web3.eth.coinbase)}.bind(this),100)},this.getTicketPrice=async function(){var t=await new Promise((t,e)=>this.CryptoBallInstance.ticketPrice.call((n,a)=>{n?(console.log("get ticket price error",n),e(n)):t(a)}));return web3.fromWei(t,"ether")},this.getBasicData=async function(){const t=await new Promise((t,e)=>this.DrawInstance.getBasicData.call((n,a)=>{n?e(n):t(a)}));return{drawNumber:t[0].toNumber(),lastDrawNumber:t[0].toNumber()-1,drawRegistrationOpen:t[1],nextDrawDateTime:t[2],closeRegistrationBefore:t[3],superPrize:t[4],prizesDistribution:t[5]}},this.getData=async function(t){return await new Promise((e,n)=>this.CryptoBallInstance[t].call((t,a)=>{t?n(t):e(a)}))},this.buyTicket=async function(t){return await new Promise((e,n)=>{var a=web3.toWei(this.ticketPrice,"ether");return this.CryptoBallInstance.buyTicket.sendTransaction(t,{value:a,from:web3.eth.coinbase},async(t,a)=>{if(t)alert("Transaction was cancelled"),n(t);else{var i=await getTransactionReceipt(a);e(i)}})})},this.registerTicket=async function(t,e,n){return new Promise((a,i)=>this.CryptoBallInstance.registerTicket.sendTransaction(t,e,n,async(t,e)=>{if(t)alert("Transaction was cancelled"),i(t);else{var n=await getTransactionReceipt(e);a(n)}}))},this.buyAndRegisterTicket=async function(t,e,n){return new Promise((a,i)=>{var s=web3.toWei(this.ticketPrice,"ether");return this.CryptoBallInstance.buyAndRegisterTicket.sendTransaction(t,e,n,{value:s*n,from:web3.eth.coinbase},async(t,e)=>{if(t)alert("Transaction was cancelled"),i(t);else{var n=await getTransactionReceipt(e);a(n)}})})},this.checkTicket=async function(t){return new Promise((e,n)=>this.CryptoBallInstance.checkTicket.sendTransaction(t,async(t,a)=>{if(t)alert("Transaction was cancelled"),n(t);else{await getTransactionReceipt(a);e(a)}}))},this.withdrawMyBalance=async function(){return new Promise((t,e)=>this.CryptoBallInstance.withdrawMyBalance.sendTransaction(async(n,a)=>{if(n)alert("Transaction was cancelled"),e(n);else{await getTransactionReceipt(a);t(a)}}))},this.registerReferrer=async function(){return new Promise((t,e)=>this.CryptoBallInstance.registerReferrer.sendTransaction(async(n,a)=>{if(n)alert("Transaction was cancelled"),e(n);else{await getTransactionReceipt(a);t(a)}}))},this.getMyReferrerId=async function(){return new Promise((t,e)=>this.CryptoBallInstance.addressToReferrer.call(web3.eth.coinbase,async(n,a)=>{n?e(n):t(a)}))},this.getReferrerTicketsCount=async function(t){return new Promise((e,n)=>this.CryptoBallInstance.getReferrerTickets.call(t,async(t,a)=>{t?n(t):e(a.length)}))},this.getDrawProof=async function(t){return new Promise((e,n)=>this.DrawInstance.drawProof.call(t,async(t,a)=>{t?n(t):e(a)}))},this.getTotalEarnReferrer=async function(t){return new Promise((e,n)=>this.CryptoBallInstance.totalEarnReferrer.call(t,async(t,a)=>{t?n(t):e(a)}))},this.getMyBalance=async function(){var t=0;try{t=await new Promise((t,e)=>this.CryptoBallInstance.getMyBalance.call((n,a)=>{n?e(n):t(a)}))}catch(t){console.log("Error",t)}return t},this.getDrawProcessInterval=async function(){var t=0;try{t=await new Promise((t,e)=>this.DrawInstance.drawProcessInterval.call((n,a)=>{n?e(n):t(a)}))}catch(t){console.log("Error",t)}return t},this.getMyTickets=async function(){var t=[];try{t=await new Promise((t,e)=>this.CryptoBallInstance.getMyTickets.call((n,a)=>{n?e(n):t(a)}))}catch(t){console.log("Error",t)}return t},this.getIpfsHash=async function(){var t=[];try{t=await new Promise((t,e)=>this.DrawInstance.ipfsHash.call((n,a)=>{n?e(n):t(a)}))}catch(t){console.log("Error",t)}return t},this.getDrawNumbers=async function(t){var e=[];try{e=await new Promise((e,n)=>this.DrawInstance.getDrawNumbers.call(t,(t,a)=>{t?n(t):e(a)}))}catch(t){console.log("Error",t)}return e.map(t=>t.toNumber())},this.getGuessedNumbers=function(t,e){return t.filter(t=>-1!==e.indexOf(t))},this.getGuessedNumbersCount=function(t,e){return t.filter(t=>-1!==e.indexOf(t)).length},this.getTicketData=async function(t){const e="cd_ticket_"+t;var n={};let a=localStorage.getItem(e);try{null===a?((a=await new Promise((e,n)=>this.DrawInstance.getTicketData.call(t,(t,a)=>{t?n(t):e(a)})))[1].length>0&&(a[1]=a[1].map(t=>t.toNumber())),n[4]&&localStorage.setItem(e,JSON.stringify(a))):a=JSON.parse(a);let i=0,s=[];a[0]>0&&(s=await this.getDrawNumbers(a[0])).length>0&&(i=this.getGuessedNumbersCount(s,a[1])),n={drawNumbers:s,ticketDraw:a[0].toNumber(),ticketNumbers:a[1],isChecked:a[2],ticketPrize:a[3].toNumber(),ticketGuessNumbers:this.getGuessedNumbers(s,a[1]),ticketGuessNumbersCount:i}}catch(t){console.log("Error",t)}return n},this.getDrawData=async function(t){var e=await new Promise((e,n)=>this.DrawInstance.getDrawData.call(t,(t,a)=>{t?n(t):e(a)}));return{prizeFund:e[0],drawTickets:e[1],drawNumbers:e[2].toNumber(),drawTime:e[3],drawPrizes:e[4],winnersCount:e[5],winnerAmounts:e[6]}}};let REFERRER_ID=Cookies.get("referrer_id")||0;const NUMBERS_COUNT=6,MAX_NUMBER=45;function success(t){let e=$(`<div class="header-top header-top-3">\n\t\t\t<div class="header-top-block-content">\n\t\t\t\t<p>${t}</p>\n\t\t\t</div>\n\t\t</div>`);$(".header").prepend(e),setTimeout(function(){e.remove()},3e3)}function err(t){let e=$(`<div class="header-top header-top-3 error">\n\t\t\t<div class="header-top-block-content">\n\t\t\t\t<p>${t}</p>\n\t\t\t</div>\n\t\t</div>`);$(".header").prepend(e),setTimeout(function(){e.remove()},3e3)}function oddNumbers(t,e){let n=[];do{let e=Math.floor(Math.random()*t);e%2==1&&-1===n.indexOf(e)&&n.push(e)}while(n.length<e);return n}function evenNumbers(t,e){let n=[];do{let e=Math.floor(Math.random()*(t-1)+2);e%2==0&&-1===n.indexOf(e)&&n.push(e)}while(n.length<e);return n}function randomNumbers(t,e){let n=[];do{let e=Math.floor(Math.random()*(t-1)+2);-1===n.indexOf(e)&&n.push(e)}while(n.length<e);return n}function addTicket(t){let e=$('\n<div class="change-ticket-wrapper">\n\t<div class="change-ticket-title">\n\t\t<h1>Новый билет</h1>\n\t\t<p>Отмечено номеров: <i class="numbers-count">0</i></p>\n\t</div>\n\t<div class="change-ticket-body">\n\t\t<div class="change-ticket-element" data-number="1">1</div>\n\t\t<div class="change-ticket-element" data-number="2">2</div>\n\t\t<div class="change-ticket-element" data-number="3">3</div>\n\t\t<div class="change-ticket-element" data-number="4">4</div>\n\t\t<div class="change-ticket-element" data-number="5">5</div>\n\t\t<div class="change-ticket-element" data-number="6">6</div>\n\t\t<div class="change-ticket-element" data-number="7">7</div>\n\t\t<div class="change-ticket-element" data-number="8">8</div>\n\t\t<div class="change-ticket-element" data-number="9">9</div>\n\t\t<div class="change-ticket-element" data-number="10">10</div>\n\t\t<div class="change-ticket-element" data-number="11">11</div>\n\t\t<div class="change-ticket-element" data-number="12">12</div>\n\t\t<div class="change-ticket-element" data-number="13">13</div>\n\t\t<div class="change-ticket-element" data-number="14">14</div>\n\t\t<div class="change-ticket-element" data-number="15">15</div>\n\t\t<div class="change-ticket-element" data-number="16">16</div>\n\t\t<div class="change-ticket-element" data-number="17">17</div>\n\t\t<div class="change-ticket-element" data-number="18">18</div>\n\t\t<div class="change-ticket-element" data-number="19">19</div>\n\t\t<div class="change-ticket-element" data-number="20">20</div>\n\t\t<div class="change-ticket-element" data-number="21">21</div>\n\t\t<div class="change-ticket-element" data-number="22">22</div>\n\t\t<div class="change-ticket-element" data-number="23">23</div>\n\t\t<div class="change-ticket-element" data-number="24">24</div>\n\t\t<div class="change-ticket-element" data-number="25">25</div>\n\t\t<div class="change-ticket-element" data-number="26">26</div>\n\t\t<div class="change-ticket-element" data-number="27">27</div>\n\t\t<div class="change-ticket-element" data-number="28">28</div>\n\t\t<div class="change-ticket-element" data-number="29">29</div>\n\t\t<div class="change-ticket-element" data-number="30">30</div>\n\t\t<div class="change-ticket-element" data-number="31">31</div>\n\t\t<div class="change-ticket-element" data-number="32">32</div>\n\t\t<div class="change-ticket-element" data-number="33">33</div>\n\t\t<div class="change-ticket-element" data-number="34">34</div>\n\t\t<div class="change-ticket-element" data-number="35">35</div>\n\t\t<div class="change-ticket-element" data-number="36">36</div>\n\t\t<div class="change-ticket-element" data-number="37">37</div>\n\t\t<div class="change-ticket-element" data-number="38">38</div>\n\t\t<div class="change-ticket-element" data-number="39">39</div>\n\t\t<div class="change-ticket-element" data-number="40">40</div>\n\t\t<div class="change-ticket-element" data-number="41">41</div>\n\t\t<div class="change-ticket-element" data-number="42">42</div>\n\t\t<div class="change-ticket-element" data-number="43">43</div>\n\t\t<div class="change-ticket-element" data-number="44">44</div>\n\t\t<div class="change-ticket-element" data-number="45">45</div>\n\t</div>\n\t<div class="change-ticket-button">\n\t\t<div class="ticket-button ticket-button-reset"><img src="" alt=""></div>\n\t\t<div class="ticket-button ticket-button-odd">НЧ</div>\n\t\t<div class="ticket-button ticket-button-even">Ч</div>\n\t\t<div class="ticket-button ticket-button-close">Очистить</div>\n\t</div>\n    <div class="change-ticket-button-description">\n        <div class="ticket-button-description ticket-button-reset">Случайно</div>\n        <div class="ticket-button-description ticket-button-odd">Нечетные</div>\n        <div class="ticket-button-description ticket-button-even">Четные</div>\n    </div>\n</div>\n');e.data("ticket-numbers",[]);let n=function(){let t=e.data("ticket-numbers");if(t.length===NUMBERS_COUNT)return;let n=$(this);n.toggleClass("ticket-element-active");let a=parseInt(n.data("number"));if(n.hasClass("ticket-element-active"))t.push(a);else{let e=t.indexOf(a);e>-1&&t.splice(e,1)}e.find(".numbers-count").html(t.length),e.data("ticket-numbers",t)};return e.find(".change-ticket-element").on("click",n),e.find(".ticket-button-odd").on("click",function(){e.find(".ticket-button-close").trigger("click");let t=oddNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let a=0;a<t.length;a++){let i=e.find(`[data-number=${t[a]}]`);n.call(i)}}),e.find(".ticket-button-even").on("click",function(){e.find(".ticket-button-close").trigger("click");let t=evenNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let a=0;a<t.length;a++){let i=e.find(`[data-number=${t[a]}]`);n.call(i)}}),e.find(".ticket-button-reset").on("click",function(){e.find(".ticket-button-close").trigger("click");let t=randomNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let a=0;a<t.length;a++){let i=e.find(`[data-number=${t[a]}]`);n.call(i)}}),e.find(".ticket-button-close").on("click",function(){e.data("ticket-numbers",[]),e.find(".numbers-count").html(0),e.find(".ticket-element-active").removeClass("ticket-element-active")}),e.find(".ticket-button-remove").on("click",function(){e.remove(),t()}),e.find(".ticket-button.ticket-button-reset").mouseover(function(){e.find(".ticket-button-description.ticket-button-reset").css("visibility","visible")}),e.find(".ticket-button.ticket-button-reset").mouseleave(function(){e.find(".ticket-button-description.ticket-button-reset").css("visibility","hidden")}),e.find(".ticket-button.ticket-button-odd").mouseover(function(){e.find(".ticket-button-description.ticket-button-odd").css("visibility","visible")}),e.find(".ticket-button.ticket-button-odd").mouseleave(function(){e.find(".ticket-button-description.ticket-button-odd").css("visibility","hidden")}),e.find(".ticket-button.ticket-button-even").mouseover(function(){e.find(".ticket-button-description.ticket-button-even").css("visibility","visible")}),e.find(".ticket-button.ticket-button-even").mouseleave(function(){e.find(".ticket-button-description.ticket-button-even").css("visibility","hidden")}),e}function initBuy(){let t=$(".draw-counts"),e=$("#tickets-total"),n=$("#price-total"),a=($(".block-ticket-addticket"),$(".button-buy")),i=function(){let a=$("#tickets-container>.change-ticket-wrapper").length;e.html(a),1!==a?t.hide():t.show(),n.html(a*Contract645.ticketPrice)},s=addTicket(i.bind(this));$("#tickets-container").append(s),i(),a.on("click",async function(){if($(this).hasClass("loading"))return;if($("#tickets-container>.change-ticket-wrapper").length){let t=$(".change-ticket-wrapper").data("ticket-numbers");if(t.length===NUMBERS_COUNT){$(this).addClass("loading");let e=$("#draw-count").val();try{await Contract645.buyAndRegisterTicket(REFERRER_ID,t,e),success(`Билет успешно зарегистрирован на розыгрыш #${Contract645.drawNumber}`),s.find(".ticket-button-close").trigger("click"),Contract645.Init()}catch(t){err("Ошибка покупки и регистрации билета"),console.log(t)}$(this).removeClass("loading")}}return!1})}async function initArchive(){const t=Contract645.drawNumber;if(!(t<=1))for(let e=t-1;e>0;e--){const t=await Contract645.getDrawData(e),n=unpack(t.drawNumbers,NUMBERS_COUNT),a=new Date(1e3*t.drawTime);let i=`\n        <tr>\n            <td>${a.toLocaleDateString()+" "+a.toLocaleTimeString().substring(0,5)}</td>\n            <td><a href="edition.html?d=${e}">${e}</a></td>\n            <td>\n                <div class="td-wrapper">\n                    <span>${n[0]}</span>\n                    <span>${n[1]}</span>\n                    <span>${n[2]}</span>\n                    <span>${n[3]}</span>\n                    <span>${n[4]}</span>\n                    <span>${n[5]}</span>\n                </div>\n            </td>\n            <td><a href="edition.html?d=${e}">Подробнее</a></td>\n            <td>${web3.fromWei(t.drawPrizes[6],"ether")}</td>\n        </tr>`;$(".archive-table>table").append(i)}}async function initEdition(t){const e=await Contract645.getDrawData(t),n=unpack(e.drawNumbers,NUMBERS_COUNT),a=new Date(1e3*e.drawTime);for(let t=0;t<n.length;t++)$(`.edition-number[data-number=${t}]`).html(n[t]);$("#draw-number").html(t),$("#draw-time").html(a.toLocaleDateString()+" "+a.toLocaleTimeString().substring(0,5)),$("#tickets-count").html(e.drawTickets.length),$("#prize-fund").html(web3.fromWei(e.prizeFund.toNumber(),"ether")),$("#super-prize").html(web3.fromWei(e.drawPrizes[6].toNumber(),"ether"));for(let t=2;t<e.winnersCount.length;t++){$(`[data-winners-count=${t}]`).html(e.winnersCount[t].toNumber());let n=web3.fromWei(e.winnerAmounts[t].toNumber(),"ether");$(`[data-winners-amount=${t}]`).html(Math.round(1e6*n)/1e6);let a=web3.fromWei(e.drawPrizes[t],"ether");$(`[data-winners-total=${t}]`).html(Math.round(1e6*a)/1e6)}let i=`http://app.oraclize.it/home/check_query?id=${(await Contract645.getDrawProof(t)).replace("0x","")}`;$("#proof").attr("href",i)}async function viewTicket(t,e){let n=e.ticketPrize;if(e.ticketDraw&&!e.isChecked&&e.ticketGuessNumbersCount>1){n=(await Contract645.getDrawData(e.ticketDraw)).winnerAmounts[e.ticketGuessNumbersCount]}let a=$(`\n        <div class="myticket-block-ticket-wrapper">\n        <div class="container-block container-block-ticket">\n            <div class="change-ticket-wrapper">\n                <div class="change-ticket-title">\n                    <h1>Тираж №${e.ticketDraw}</h1>\n                    <p class="active">Билет №${t}</p>\n                </div>\n                <div class="change-ticket-body readonly">\n                    <div class="change-ticket-element" data-number="1">1</div>\n                    <div class="change-ticket-element" data-number="2">2</div>\n                    <div class="change-ticket-element" data-number="3">3</div>\n                    <div class="change-ticket-element" data-number="4">4</div>\n                    <div class="change-ticket-element" data-number="5">5</div>\n                    <div class="change-ticket-element" data-number="6">6</div>\n                    <div class="change-ticket-element" data-number="7">7</div>\n                    <div class="change-ticket-element" data-number="8">8</div>\n                    <div class="change-ticket-element" data-number="9">9</div>\n                    <div class="change-ticket-element" data-number="10">10</div>\n                    <div class="change-ticket-element" data-number="11">11</div>\n                    <div class="change-ticket-element" data-number="12">12</div>\n                    <div class="change-ticket-element" data-number="13">13</div>\n                    <div class="change-ticket-element" data-number="14">14</div>\n                    <div class="change-ticket-element" data-number="15">15</div>\n                    <div class="change-ticket-element" data-number="16">16</div>\n                    <div class="change-ticket-element" data-number="17">17</div>\n                    <div class="change-ticket-element" data-number="18">18</div>\n                    <div class="change-ticket-element" data-number="19">19</div>\n                    <div class="change-ticket-element" data-number="20">20</div>\n                    <div class="change-ticket-element" data-number="21">21</div>\n                    <div class="change-ticket-element" data-number="22">22</div>\n                    <div class="change-ticket-element" data-number="23">23</div>\n                    <div class="change-ticket-element" data-number="24">24</div>\n                    <div class="change-ticket-element" data-number="25">25</div>\n                    <div class="change-ticket-element" data-number="26">26</div>\n                    <div class="change-ticket-element" data-number="27">27</div>\n                    <div class="change-ticket-element" data-number="28">28</div>\n                    <div class="change-ticket-element" data-number="29">29</div>\n                    <div class="change-ticket-element" data-number="30">30</div>\n                    <div class="change-ticket-element" data-number="31">31</div>\n                    <div class="change-ticket-element" data-number="32">32</div>\n                    <div class="change-ticket-element" data-number="33">33</div>\n                    <div class="change-ticket-element" data-number="34">34</div>\n                    <div class="change-ticket-element" data-number="35">35</div>\n                    <div class="change-ticket-element" data-number="36">36</div>\n                    <div class="change-ticket-element" data-number="37">37</div>\n                    <div class="change-ticket-element" data-number="38">38</div>\n                    <div class="change-ticket-element" data-number="39">39</div>\n                    <div class="change-ticket-element" data-number="40">40</div>\n                    <div class="change-ticket-element" data-number="41">41</div>\n                    <div class="change-ticket-element" data-number="42">42</div>\n                    <div class="change-ticket-element" data-number="43">43</div>\n                    <div class="change-ticket-element" data-number="44">44</div>\n                    <div class="change-ticket-element" data-number="45">45</div>\n                </div>\n            </div>\n        </div>\n        <div class="container-block container-block-buy">\n            <div class="myticket-register-out-block">\n                <p>Совпадений <span>${e.ticketGuessNumbersCount}</span> из <span>${NUMBERS_COUNT}</span> чисел:</p>\n                <div class="myticket-register-out-block-number">\n                    <span data-i="0">-</span>\n                    <span data-i="1">-</span>\n                    <span data-i="2">-</span>\n                    <span data-i="3">-</span>\n                    <span data-i="4">-</span>\n                    <span data-i="5">-</span>\n                </div>\n                <h4>Совпавшие числа</h4>\n                <h3>Не совпавшие</h3>\n                <p>Ваш выигрыш составил:</p>\n                <div class="myticket-register-out-block-price">\n                    <h2>${web3.fromWei(n,"ether")}</h2>\n                    <span>ETH</span>\n                </div>\n                <a class="button button-myticket-win" data-ticket-number="${t}">Забрать выигрыш</a>\n            </div>\n        </div>\n    </div>\n`);for(let t=0;t<e.drawNumbers.length;t++){let n=a.find(`.myticket-register-out-block-number>[data-i=${t}]`);n.data("data-number",e.drawNumbers[t]),n.html(e.drawNumbers[t]),e.ticketGuessNumbers.indexOf(e.drawNumbers[t])>-1&&n.addClass("active")}for(let t=0;t<e.ticketNumbers.length;t++){let n="active-off";e.ticketGuessNumbers.indexOf(e.ticketNumbers[t])>-1&&(n="active-on"),a.find(`.change-ticket-body>[data-number=${e.ticketNumbers[t]}]`).addClass(n)}return(0===n||e.isChecked)&&a.find(".button-myticket-win").remove(),e.readOnly&&a.find(".container-block-buy").remove(),a}function viewRegisteredTicket(t,e){let n=e.ticketPrize,a=Contract645.nextDrawDateTime.toNumber();e.ticketDraw>Contract645.drawNumber&&(a+=(e.ticketDraw-Contract645.drawNumber)*Contract645.drawProcessInterval.toNumber()*60*60*24);let i=new Date(1e3*a),s=$(`\n        <div class="myticket-block-ticket-wrapper">\n            <div class="container-block container-block-ticket">\n                <div class="change-ticket-wrapper">\n                    <div class="change-ticket-title">\n                        <h1>Тираж №${e.ticketDraw}</h1>\n                        <p class="active">Билет №${t} – <span>зарегистрирован</span></p>\n                    </div>\n                    <div class="change-ticket-body readonly">\n                        <div class="change-ticket-element" data-number="1">1</div>\n                        <div class="change-ticket-element" data-number="2">2</div>\n                        <div class="change-ticket-element" data-number="3">3</div>\n                        <div class="change-ticket-element" data-number="4">4</div>\n                        <div class="change-ticket-element" data-number="5">5</div>\n                        <div class="change-ticket-element" data-number="6">6</div>\n                        <div class="change-ticket-element" data-number="7">7</div>\n                        <div class="change-ticket-element" data-number="8">8</div>\n                        <div class="change-ticket-element" data-number="9">9</div>\n                        <div class="change-ticket-element" data-number="10">10</div>\n                        <div class="change-ticket-element" data-number="11">11</div>\n                        <div class="change-ticket-element" data-number="12">12</div>\n                        <div class="change-ticket-element" data-number="13">13</div>\n                        <div class="change-ticket-element" data-number="14">14</div>\n                        <div class="change-ticket-element" data-number="15">15</div>\n                        <div class="change-ticket-element" data-number="16">16</div>\n                        <div class="change-ticket-element" data-number="17">17</div>\n                        <div class="change-ticket-element" data-number="18">18</div>\n                        <div class="change-ticket-element" data-number="19">19</div>\n                        <div class="change-ticket-element" data-number="20">20</div>\n                        <div class="change-ticket-element" data-number="21">21</div>\n                        <div class="change-ticket-element" data-number="22">22</div>\n                        <div class="change-ticket-element" data-number="23">23</div>\n                        <div class="change-ticket-element" data-number="24">24</div>\n                        <div class="change-ticket-element" data-number="25">25</div>\n                        <div class="change-ticket-element" data-number="26">26</div>\n                        <div class="change-ticket-element" data-number="27">27</div>\n                        <div class="change-ticket-element" data-number="28">28</div>\n                        <div class="change-ticket-element" data-number="29">29</div>\n                        <div class="change-ticket-element" data-number="30">30</div>\n                        <div class="change-ticket-element" data-number="31">31</div>\n                        <div class="change-ticket-element" data-number="32">32</div>\n                        <div class="change-ticket-element" data-number="33">33</div>\n                        <div class="change-ticket-element" data-number="34">34</div>\n                        <div class="change-ticket-element" data-number="35">35</div>\n                        <div class="change-ticket-element" data-number="36">36</div>\n                        <div class="change-ticket-element" data-number="37">37</div>\n                        <div class="change-ticket-element" data-number="38">38</div>\n                        <div class="change-ticket-element" data-number="39">39</div>\n                        <div class="change-ticket-element" data-number="40">40</div>\n                        <div class="change-ticket-element" data-number="41">41</div>\n                        <div class="change-ticket-element" data-number="42">42</div>\n                        <div class="change-ticket-element" data-number="43">43</div>\n                        <div class="change-ticket-element" data-number="44">44</div>\n                        <div class="change-ticket-element" data-number="45">45</div>\n                    </div>\n                </div>\n            </div>\n            <div class="container-block container-block-buy">\n                <div class="myticket-register-block">\n                    <p>Розыгрыш начнется через:</p>\n                    <h2 data-tw-filter="countdown">${a}</h2>\n                    <span>${i.toLocaleDateString()+" "+i.toLocaleTimeString().substring(0,5)}</span>\n                </div>\n            </div>\n        </div>\n`);for(let t=0;t<e.drawNumbers.length;t++){let n=s.find(`.myticket-register-out-block-number>[data-i=${t}]`);n.data("data-number",e.drawNumbers[t]),n.html(e.drawNumbers[t]),e.ticketGuessNumbers.indexOf(e.drawNumbers[t])>-1&&n.addClass("active")}for(let t=0;t<e.ticketNumbers.length;t++){let n="active-off";e.ticketGuessNumbers.indexOf(e.ticketNumbers[t])>-1&&(n="active-on"),s.find(`.change-ticket-body>[data-number=${e.ticketNumbers[t]}]`).addClass(n)}return(0===n||e.isChecked)&&s.find(".button-myticket-win").remove(),countdown(1e3*a,s.find("[data-tw-filter=countdown]")[0]),s}function viewUnregisteredTicket(t,e){let n=Contract645.nextDrawDateTime.toNumber(),a=new Date(1e3*n),i=$(`\n        <div class="myticket-block-ticket-wrapper">\n            <div class="container-block container-block-ticket">\n                <div class="change-ticket-wrapper">\n                    <div class="change-ticket-title">\n                        <h1>Билет №${t}</h1>\n                        <p class="active">Отмечено номеров: <i class="numbers-count">0</i></p>\n                    </div>\n                    <div class="change-ticket-body">\n                        <div class="change-ticket-element" data-number="1">1</div>\n                        <div class="change-ticket-element" data-number="2">2</div>\n                        <div class="change-ticket-element" data-number="3">3</div>\n                        <div class="change-ticket-element" data-number="4">4</div>\n                        <div class="change-ticket-element" data-number="5">5</div>\n                        <div class="change-ticket-element" data-number="6">6</div>\n                        <div class="change-ticket-element" data-number="7">7</div>\n                        <div class="change-ticket-element" data-number="8">8</div>\n                        <div class="change-ticket-element" data-number="9">9</div>\n                        <div class="change-ticket-element" data-number="10">10</div>\n                        <div class="change-ticket-element" data-number="11">11</div>\n                        <div class="change-ticket-element" data-number="12">12</div>\n                        <div class="change-ticket-element" data-number="13">13</div>\n                        <div class="change-ticket-element" data-number="14">14</div>\n                        <div class="change-ticket-element" data-number="15">15</div>\n                        <div class="change-ticket-element" data-number="16">16</div>\n                        <div class="change-ticket-element" data-number="17">17</div>\n                        <div class="change-ticket-element" data-number="18">18</div>\n                        <div class="change-ticket-element" data-number="19">19</div>\n                        <div class="change-ticket-element" data-number="20">20</div>\n                        <div class="change-ticket-element" data-number="21">21</div>\n                        <div class="change-ticket-element" data-number="22">22</div>\n                        <div class="change-ticket-element" data-number="23">23</div>\n                        <div class="change-ticket-element" data-number="24">24</div>\n                        <div class="change-ticket-element" data-number="25">25</div>\n                        <div class="change-ticket-element" data-number="26">26</div>\n                        <div class="change-ticket-element" data-number="27">27</div>\n                        <div class="change-ticket-element" data-number="28">28</div>\n                        <div class="change-ticket-element" data-number="29">29</div>\n                        <div class="change-ticket-element" data-number="30">30</div>\n                        <div class="change-ticket-element" data-number="31">31</div>\n                        <div class="change-ticket-element" data-number="32">32</div>\n                        <div class="change-ticket-element" data-number="33">33</div>\n                        <div class="change-ticket-element" data-number="34">34</div>\n                        <div class="change-ticket-element" data-number="35">35</div>\n                        <div class="change-ticket-element" data-number="36">36</div>\n                        <div class="change-ticket-element" data-number="37">37</div>\n                        <div class="change-ticket-element" data-number="38">38</div>\n                        <div class="change-ticket-element" data-number="39">39</div>\n                        <div class="change-ticket-element" data-number="40">40</div>\n                        <div class="change-ticket-element" data-number="41">41</div>\n                        <div class="change-ticket-element" data-number="42">42</div>\n                        <div class="change-ticket-element" data-number="43">43</div>\n                        <div class="change-ticket-element" data-number="44">44</div>\n                        <div class="change-ticket-element" data-number="45">45</div>\n                    </div>\n                    <div class="change-ticket-button">\n                        <div class="ticket-button ticket-button-reset"><img src="" alt=""></div>\n                        <div class="ticket-button ticket-button-odd">НЧ</div>\n                        <div class="ticket-button ticket-button-even">Ч</div>\n                        <div class="ticket-button ticket-button-close">Очистить</div>\n                    </div>\n                    <div class="change-ticket-button-description">\n                        <div class="ticket-button-description ticket-button-reset">Случайно</div>\n                        <div class="ticket-button-description ticket-button-odd">Нечетные</div>\n                        <div class="ticket-button-description ticket-button-even">Четные</div>\n                    </div>\n                </div>\n            </div>\n            <div class="container-block container-block-buy">\n                <div class="myticket-register-block">\n                    <a class="button-myticket-register">Зарегистрировать</a>\n                    <p>Розыгрыш начнется через:</p>\n                    <h2 data-tw-filter="countdown">${n}</h2>\n                    <span>${a.toLocaleDateString()+" "+a.toLocaleTimeString().substring(0,5)}</span>\n                </div>\n            </div>\n        </div>\n`);i.data("ticket-numbers",[]);let s=function(){let t=i.data("ticket-numbers");if(t.length===NUMBERS_COUNT)return;let e=$(this);e.toggleClass("ticket-element-active");let n=parseInt(e.data("number"));if(e.hasClass("ticket-element-active"))t.push(n);else{let e=t.indexOf(n);e>-1&&t.splice(e,1)}i.find(".numbers-count").html(t.length),i.data("ticket-numbers",t)};return i.find(".change-ticket-element").on("click",s),i.find(".ticket-button-odd").on("click",function(){i.find(".ticket-button-close").trigger("click");let t=oddNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let e=0;e<t.length;e++){let n=i.find(`[data-number=${t[e]}]`);s.call(n)}}),i.find(".ticket-button-even").on("click",function(){i.find(".ticket-button-close").trigger("click");let t=evenNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let e=0;e<t.length;e++){let n=i.find(`[data-number=${t[e]}]`);s.call(n)}}),i.find(".ticket-button-reset").on("click",function(){i.find(".ticket-button-close").trigger("click");let t=randomNumbers(MAX_NUMBER,NUMBERS_COUNT);for(let e=0;e<t.length;e++){let n=i.find(`[data-number=${t[e]}]`);s.call(n)}}),i.find(".ticket-button-close").on("click",function(){i.data("ticket-numbers",[]),i.find(".numbers-count").html(0),i.find(".ticket-element-active").removeClass("ticket-element-active")}),i.find(".ticket-button-remove").on("click",function(){i.remove(),callback()}),i.find(".button-myticket-register").on("click",async function(){if($(this).hasClass("loading"))return!1;let e=i.data("ticket-numbers");if(e.length===NUMBERS_COUNT){$(this).addClass("loading");$("#draw-count").val();try{await Contract645.registerTicket(t,e,Contract645.drawNumber);const n=await Contract645.getTicketData(t),a=await viewRegisteredTicket(t,n);$(this).closest(".myticket-block-ticket-wrapper").replaceWith(a),success(`Билет успешно зарегистрирован на розыгрыш #${Contract645.drawNumber}`)}catch(t){console.log(t)}$(this).removeClass("loading")}return!1}),i.find(".ticket-button.ticket-button-reset").mouseover(function(){i.find(".ticket-button-description.ticket-button-reset").css("visibility","visible")}),i.find(".ticket-button.ticket-button-reset").mouseleave(function(){i.find(".ticket-button-description.ticket-button-reset").css("visibility","hidden")}),i.find(".ticket-button.ticket-button-odd").mouseover(function(){i.find(".ticket-button-description.ticket-button-odd").css("visibility","visible")}),i.find(".ticket-button.ticket-button-odd").mouseleave(function(){i.find(".ticket-button-description.ticket-button-odd").css("visibility","hidden")}),i.find(".ticket-button.ticket-button-even").mouseover(function(){i.find(".ticket-button-description.ticket-button-even").css("visibility","visible")}),i.find(".ticket-button.ticket-button-even").mouseleave(function(){i.find(".ticket-button-description.ticket-button-even").css("visibility","hidden")}),e.readOnly?i.find(".button-myticket-register").off("click"):countdown(1e3*n,i.find("[data-tw-filter=countdown]")[0]),i}async function initMyTickets(){for(const t of Contract645.myTickets){const e=await Contract645.getTicketData(t);let n;n=e.ticketDraw>=Contract645.drawNumber?viewRegisteredTicket(t,e):0===e.ticketDraw?viewUnregisteredTicket(t,e):await viewTicket(t,e),$(".myticket-container").append(n)}$(".button-myticket-win").on("click",async function(){if($(this).hasClass("loading"))return;$(this).addClass("loading");const t=$(this).data("ticket-number");try{await Contract645.checkTicket(t),await Contract645.Init();const e=await Contract645.getTicketData(t),n=await viewTicket(t,e);$(this).closest(".myticket-block-ticket-wrapper").replaceWith(n)}catch(t){err("Ошибка, повторите запрос")}return $(this).removeClass("loading"),!1})}function initReferrer(){Contract645.myReferrerId?($(".referrals-block-link-wrapper").show(),$(".referrals-block-link-wrapper").text(`${document.location.origin}/?r=${Contract645.myReferrerId}`),$(".referrals-block-link-wrapper").on("click",function(){const t=$(this).text();copyToClipboard(t)&&success("Ссылка скопирована в буфер обмена")}),$(".button-referrals").remove()):$(".button-referrals").on("click",async function(){if(!$(this).hasClass("loading")){$(this).addClass("loading");try{await Contract645.registerReferrer(),document.location.reload()}catch(t){err("Ошибка регистрации реферальной ссылки")}return $(this).removeClass("loading"),!1}})}function runIndex(){Contract645.lastDrawNumber<=0&&$(".main-result").hide()}!function(){const t=parseInt(getQueryVariable("r"));t>0&&(REFERRER_ID=t,Cookies.set("referrer_id",REFERRER_ID,{expires:365}));let e=$(".container-block-ticket").children(".change-ticket-wrapper").length;screen.width>="860"&&e>2&&$("#sticky").sticky({topSpacing:50}),$(".btn-popup-menu").click(function(){$(".header-wrapper nav").toggle()}),$(".withdraw").on("click",async function(){if(!$(this).hasClass("loading")&&Contract645.myBalance>0){$(this).addClass("loading");try{await Contract645.withdrawMyBalance(),success("Баланс успешно выведен"),document.location.reload()}catch(t){err("Ошибка вывода баланса"),console.log(t)}$(this).removeClass("loading")}});var n=setInterval(async()=>{Contract645.ready&&(clearInterval(n),Contract645.myTickets.length>0&&OneSignal.push(function(){OneSignal.init({appId:"4aca4704-1891-4f06-b6a5-3b432167849d"}),runOneSignal()}))},1)}();